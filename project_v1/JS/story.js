let drama = {
    dyht: [
        {
            title: '湫',
            text: '我知道一个好名字'
        },
        {
            title: '椿',
            text: '说'
        },
        {
            title: '湫',
            text: '你先把窗打开'
        },
        {
            title: '湫',
            text: '北冥有鱼，其名为鲲。鲲之大，不知其几千里也。怒而飞，其翼如垂天之云。'
        },
        {
            title: '湫',
            text: '是古书上写的, 就说, 有一种鱼叫鲲, 超级大, 有天那么大, 还能飞, 翅膀像云一样大。'
        },
        {
            title: '椿',
            text: '从今以后'
        },
        {
            title: '椿',
            text: '你的名字就叫做   "鲲"',
        },
        {
            title: '',
            text: ''
        },
        {
            title: '湫',
            text: '过来 拉住我的手'
        },
        {
            title: '湫',
            text: '快点  来不及了！'
        },
        {
            title: '',
            text: '你走上前去...'
        },
        {
            title: '椿',
            text: '你怎么了 湫'
        },
        {
            title: '湫',
            text: '我要送你离开这里'
        },
        {
            title: '湫',
            text: '到鲲那里去'
        },
        {
            title: '椿',
            text: '我们不是一起回家吗？'
        },
        {
            title: '湫',
            text: '我向灵婆赎回了你的寿命'
        },
        {
            title: '湫',
            text: '我会把你送到人间去生活'
        },
        {
            title: '湫',
            text: '跟我来'
        },
        {
            title: '',
            text: '我们一起走到悬崖边...'
        },
        {
            title: '湫',
            text: '数到三  跟我一起跳！'
        },
        {
            title: '湫',
            text: '相信我啊！'
        },
        {
            title: '',
            text: '一...'
        },
        {
            title: '',
            text: '二...'
        },
        {
            title: '',
            text: '三...'
        },
        {
            title: '湫',
            text: '我会化作人间的风雨陪在你身边。'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: '他消失了... 只留我一人...'
        }
    ],
    lxh: [
        {
            title: '无限',
            text: '人类唯一厉害的就是做饭'
        },
        {
            title: '店小二',
            text: '请问你要怎么支付'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: ''
        },
        {
            title: '店小二',
            text: '.............'
        },
        {
            title: '',
            text: '你押下一块玉佩'
        },
        {
            title: '店小二',
            text: '吃霸王餐呐'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '罗小黑',
            text: '钱真是好东西'
        },
        {
            title: '无限',
            text: '瞬间就物质了啊你'
        },
        {
            title: '罗小黑',
            text: '有钱可以坐那个吗？'
        },
        {
            title: '无限',
            text: '买一辆都没问题'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: ''
        }
    ],
    nz: [
        {
            title: '哪吒',
            text: '若命运不公'
        },
        {
            title: '哪吒',
            text: '就和他斗到底！'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '哪吒',
            text: '我命由我 不由天！'
        },
        {
            title: '',
            text: '',
        },
        {
            title: '',
            text: ''
        },
        {
            title: '敖丙',
            text: '为何不刺？'
        },
        {
            title: '哪吒',
            text: '我说过'
        },
        {
            title: '',
            text: ''
        }
    ],
    bs: [
        {
            title: '',
            text: '地上有一支簪子'
        },
        {
            title: '',
            text: '好像是那对女孩掉的'
        },
        {
            title: '许仙',
            text: '姑娘'
        },
        {
            title: '',
            text: '你穿过人群...'
        },
        {
            title: '许仙',
            text: '姑娘'
        },
        {
            title: '许仙',
            text: '你的珠钗掉了'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '白娘子',
            text: '谢谢官人'
        },
        {
            title: '许仙',
            text: '这珠钗年代久远，可是宝贵之物'
        },
        {
            title: '白娘子',
            text: '是啊'
        },
        {
            title: '白娘子',
            text: '多谢小官人捡到，这可是万万不能丢的'
        },
        {
            title: '许仙',
            text: '小娘子看着好生面善，是何方之人？'
        },
        {
            title: '白娘子',
            text: '说来话长...'
        },
        {
            title: '',
            text: ''
        }
    ],
    dsgl: [
        {
            title: '',
            text: '话说在很久以前 有个猴王孙悟空',
        },
        {
            title: '',
            text: '他法力高强 神通广大'
        },
        {
            title: '',
            text: '因为大闹天宫',
        },
        {
            title: '',
            text: '惹怒了玉皇大帝'
        },
        {
            title: '宝塔天王',
            text: '你触犯天条 还不快快伏法！'
        },
        {
            title: '',
            text: ''
        },
        {
            title: '',
            text: ''
        },
        {
            title: '大圣',
            text: '去你的吧！'
        }
    ]
};
const background = {
    dyht: [
        './img/story/dyht/1.png',
        './img/story/dyht/2.png',
        './img/story/dyht/3.png',
        './img/story/dyht/4.png',
        './img/story/dyht/5.png',
        './img/story/dyht/6.png',
        './img/story/dyht/7.png',
        './img/story/dyht/8.png',
        './img/story/dyht/9.png',
        './img/story/dyht/10.png',
        './img/story/dyht/11.png',
        './img/story/dyht/12.png',
        './img/story/dyht/13.png',
        './img/story/dyht/14.png',
        './img/story/dyht/15.png',
        './img/story/dyht/16.png',
        './img/story/dyht/17.png',
        './img/story/dyht/18.png',
        './img/story/dyht/19.png',
    ],
    lxh: [
        './img/story/lxh/1.png',
        './img/story/lxh/2.png',
        './img/story/lxh/3.png',
        './img/story/lxh/4.png',
        './img/story/lxh/5.png',
        './img/story/lxh/6.png',
        './img/story/lxh/7.png',
        './img/story/lxh/8.png',
        './img/story/lxh/9.png',
        './img/story/lxh/10.png',
        './img/story/lxh/11.png',
        './img/story/lxh/12.png',
        './img/story/lxh/13.png',
        './img/story/lxh/14.png',
        './img/story/lxh/15.png',
        './img/story/lxh/16.png',
    ],
    nz: [
        './img/story/nz/1.png',
        './img/story/nz/2.png',
        './img/story/nz/3.png',
        './img/story/nz/4.png',
        './img/story/nz/5.png',
        './img/story/nz/6.png',
        './img/story/nz/7.png',
    ],
    bs: [
        './img/story/bs/1.png',
        './img/story/bs/2.png',
        './img/story/bs/3.png',
        './img/story/bs/4.png',
        './img/story/bs/5.png',
        './img/story/bs/6.png',
        './img/story/bs/7.png',
        './img/story/bs/8.png',
        './img/story/bs/9.png',
    ],
    dsgl: [
        './img/story/dsgl/1.png',
        './img/story/dsgl/2.png',
        './img/story/dsgl/3.png',
        './img/story/dsgl/4.png',
        './img/story/dsgl/5.png',
        './img/story/dsgl/6.png',
        './img/story/dsgl/7.png',
        './img/story/dsgl/8.png',
    ]
};
const selections = {
    dyht: [
        {
            first: '开窗',
            second: '不开窗'
        },
        {
            first: '不上前',
            second: '上前'
        },
        {
            first: '跳',
            second: '不跳'
        }
    ],
    lxh: [
        {
            first: '手机支付',
            second: '现金支付'
        },
        {
            first: '扣下玉佩 & 逃跑',
            second: '以身抵债',
        },
        {
            first: '买',
            second: '不买'
        }
    ],
    nz: [
        {
            first: '刺',
            second: '不刺'
        },
        {
            first: '你是我最好的朋友',
            second: '你是我唯一的朋友'
        }
    ],
    bs: [
        {
            first: '捡',
            second: '不捡'
        },
        {
            first: '追上前去',
            second: '不追'
        }
    ],
    dsgl: [
        {
            first: '伏法',
            second: '不伏法'
        }
    ]
};
const options = {
    dyht: {
        before_1: () => {
            changeBackGroundImage(background['dyht'][1]);
        },
        before_2: () => {
            changeBackGroundImage(background['dyht'][2]);
        },
        after_2: () => {
            dialog.skipNextHandler = true;
            selectionAppear(0);
        },
        before_3: () => {
            if (user_selections[0] === 1) {
                drama['dyht'][3].title = '';
                drama['dyht'][3].text = '';
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 1500)
            } else {
                changeBackGroundImage(background['dyht'][3]);
            }
        },
        before_4: () => {
            changeBackGroundImage(background['dyht'][4]);
        },
        before_5: () => {
            changeBackGroundImage(background['dyht'][5]);
        },
        before_7: () => {
            backgroundTransition();
        },
        after_7: () => {
            dialog.skipNextHandler = true;
            stopBackGroundMusic(audio);
            setTimeout(() => {
                dialog.triggers[8] = true;
            }, 2000)
        },
        before_8: () => {
            changeBackGroundMusic(audio, './bgm/dyht_2.mp3');
            changeBackGroundImage(background['dyht'][6]);
        },
        before_9: () => {
            changeBackGroundImage(background['dyht'][7]);
        },
        after_9: () => {
            dialog.skipNextHandler = true;
            selectionAppear(1)
        },
        before_10: () => {
            if (user_selections[1] === 0) {
                drama['dyht'][10].title = '';
                drama['dyht'][10].text = '';
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 1500)
            } else {
                changeBackGroundImage(background['dyht'][8]);
            }
        },
        before_11: () => {
            changeBackGroundImage(background['dyht'][9]);
        },
        before_12: () => {
            changeBackGroundImage(background['dyht'][10]);
        },
        before_14: () => {
            changeBackGroundImage(background['dyht'][11]);
        },
        before_15: () => {
            changeBackGroundImage(background['dyht'][12]);
        },
        before_18: () => {
            changeBackGroundImage(background['dyht'][13]);
        },
        before_19: () => {
            changeBackGroundImage(background['dyht'][14]);
        },
        before_20: () => {
            changeBackGroundImage(background['dyht'][15]);
        },
        after_20: () => {
            dialog.skipNextHandler = true;
            selectionAppear(2);
        },
        before_21: () => {
            if (user_selections[2] === 1) {
                drama['dyht'][21].title = '';
                drama['dyht'][21].text = '';
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 1200)
            } else {
                changeBackGroundImage(background['dyht'][16]);
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.triggers[22] = true;
                }, 1500)
            }
        },
        before_22: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[23] = true;
            }, 1500)
        },
        before_23: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[24] = true;
            }, 1500)
        },
        before_24: () => {
            changeBackGroundImage(background['dyht'][17]);
        },
        before_25: () => {
            changeBackGroundImage(background['dyht'][18]);
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[26]= true;
            }, 3000)
        },
        before_26: () => {
            backgroundTransition();
        }
    },
    lxh: {
        before_1: () => {
            changeBackGroundImage(background['lxh'][1]);
        },
        after_1: () => {
            dialog.skipNextHandler = true;
            selectionAppear(0);
        },
        before_2: () => {
            if (user_selections[0] === 0) {
                drama.lxh[2].text = '你掏出了手机...';
                drama.lxh[3].text = '手机在水里泡太久了，无法使用';
                drama.lxh[4].text = '你掏出了纸币';
                drama.lxh[5].text = '纸币在水里泡太久了，无法使用';
                changeBackGroundImage(background['lxh'][2]);
            } else {
                drama.lxh[2].text = '你掏出了纸币';
                drama.lxh[3].text = '纸币在水里泡太久了，无法使用';
                drama.lxh[4].text = '你掏出了手机...';
                drama.lxh[5].text = '手机在水里泡太久了，无法使用';
                changeBackGroundImage(background['lxh'][4]);
            }
        },
        after_2: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[3] = true;
            }, 1500);
        },
        before_3: () => {
            if (user_selections[0] === 0) {
                changeBackGroundImage(background['lxh'][3]);
            }
        },
        before_4: () => {
            if (user_selections[0] === 0) {
                changeBackGroundImage(background['lxh'][4]);
            } else {
                changeBackGroundImage(background['lxh'][2]);
            }
        },
        after_4:() => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[5] = true;
            }, 1500);
        },
        before_5: () => {
            if (user_selections[0] === 1) {
                changeBackGroundImage(background['lxh'][3]);
            }
        },
        before_6: () => {
            changeBackGroundImage(background['lxh'][5]);
        },
        after_6: () => {
            dialog.skipNextHandler = true;
            selectionAppear(1);
        },
        before_7: () => {
            if (user_selections[1] === 1) {
                drama['lxh'][7].title = '';
                drama['lxh'][7].text = '';
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 1500)
            }
            else {
                changeBackGroundImage(background['lxh'][6]);
            }
        },
        before_8: () => {
            changeBackGroundImage(background['lxh'][7]);
        },
        before_9: () => {
            backgroundTransition();
        },
        after_9: () =>{
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[10] = true;
            }, 2000);
        },
        before_10: () => {
            changeBackGroundImage(background['lxh'][8]);
        },
        before_12: () => {
            changeBackGroundImage(background['lxh'][9]);
        },
        before_13: () => {
            changeBackGroundImage(background['lxh'][10]);
        },
        after_13: () => {
            dialog.skipNextHandler = true;
            selectionAppear(2);
        },
        before_14: () => {
            if (user_selections[2] === 1) {
                drama['lxh'][14].title = '';
                drama['lxh'][14].text = '';
                dialog.skipNextHandler = true;
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 1500)
            } else {
                backgroundTransition();
            }
        },
        after_14: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[15] = true;
            }, 2000);
        },
        before_15: () => {
            changeBackGroundImage(background['lxh'][11]);
        }
    },
    nz: {
        before_1: () => {
            changeBackGroundImage(background['nz'][1])
        },
        before_2: () => {
            backgroundTransition();
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[3] = true;
            }, 2000)
        },
        before_3: () => {
            changeBackGroundImage(background['nz'][2]);
        },
        before_4: () => {
            backgroundTransition();
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[5] = true;
            }, 2000)
        },
        before_5: () => {
            changeBackGroundImage(background['nz'][3]);
        },
        after_5: () => {
            dialog.skipNextHandler = true;
            selectionAppear(0);
        },
        before_6: () => {
            if (user_selections[0] === 0) {
                drama['nz'][6].title = '';
                drama['nz'][6].text = '';
                dialog.lock = true;
                setTimeout(() => {
                    parseScore();
                }, 1500)
            } else {
                changeBackGroundImage(background['nz'][4]);
            }
        },
        before_7: () => {
            changeBackGroundImage(background['nz'][5]);
        },
        after_7: () => {
            dialog.skipNextHandler = true;
            selectionAppear(1);
        },
    },
    bs: {
        after_0: () => {
            dialog.skipNextHandler = true;
            selectionAppear(0);
        },
        before_1: () => {
            if (user_selections[0] === 1) {
                drama['bs'][1].title = '';
                drama['bs'][1].text = '';
                dialog.lock = true;
                setTimeout(() => {
                    parseScore();
                }, 1500)
            } else {
                changeBackGroundImage(background['bs'][1]);
            }
        },
        before_2: () => {
            changeBackGroundImage(background['bs'][2]);
        },
        after_2: () => {
            dialog.skipNextHandler = true;
            selectionAppear(1)
        },
        before_3: () => {
            if (user_selections[1] === 1) {
                drama['bs'][3].title = '';
                drama['bs'][3].text = '';
                setTimeout(() => {
                    window.location.href = 'end.html';
                }, 1500)
            } else {
                changeBackGroundImage(background['bs'][3]);
            }
        },
        before_4: () => {
            changeBackGroundImage(background['bs'][4]);
        },
        before_5: () => {
            changeBackGroundImage(background['bs'][5]);
        },
        before_6: () => {
            changeBackGroundImage(background['bs'][6]);
        },
        after_6: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[7] = true;
            }, 2000);
        },
        before_7: () => {
            changeBackGroundImage(background['bs'][7]);
        },
        before_9:() => {
            changeBackGroundImage(background['bs'][8]);
        },
        before_12: () => {
            backgroundTransition();
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[13] = true;
            }, 2000);
        },
        before_13: () => {
            // changeBackGroundImage(background['bs'][8]);
        },
    },
    dsgl: {
        before_1: () => {
            changeBackGroundImage(background['dsgl'][1]);
        },
        before_3: () => {
            changeBackGroundImage(background['dsgl'][2]);
        },
        before_4: () => {
            changeBackGroundImage(background['dsgl'][3]);
        },
        after_4: () => {
            selectionAppear(0);
            dialog.skipNextHandler = true;
        },
        before_5: () => {
            if (user_selections[0] === 0) {
                dialog.skipNextHandler = true;
                changeBackGroundImage(background['dsgl'][4]);
                setTimeout(() => {
                    dialog.lock = true;
                    parseScore();
                }, 3000);
            } else {
                changeBackGroundImage(background['dsgl'][5]);
            }
        },
        after_5: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[6] = user_selections[0] !== 0;
            }, 1500)
        },
        before_6: () => {
            changeBackGroundImage(background['dsgl'][6]);
        },
        after_6: () => {
            dialog.skipNextHandler = true;
            setTimeout(() => {
                dialog.triggers[7] = true;
            }, 1500)
        },
        before_7: () => {
            changeBackGroundImage(background['dsgl'][7]);
        }
    }
};

const current_game = getCookie('current_game');
const bgm = {
    dyht: './bgm/dyht.mp3',
    lxh: './bgm/lxh.mp3',
    nz: './bgm/nz.mp3',
    bs: './bgm/bs.mp3',
    dsgl: './bgm/dsgl.mp3'
};

let vm_selection = new Vue({
    el: '#select',
    data: {
        first: '',
        second: '',
    }
});
let vm_storyboard = new Vue({
    el: '#storyboard',
    data: {
        title: '',
        text: '',
    }
});

function selectionAppear(order) {
    vm_selection.first = selections[current_game][order].first;
    vm_selection.second = selections[current_game][order].second;
    lock_hover = 0;
    lock_document = 0;
    for (let i = 0; i < selectChildren.length; i++) {
        selectChildren[i].className = 'display_block';
        selectChildren[i].classList.add('emerge');
    }
}

function selectClickHandler(e) {
    for (let i = 1; i < dialog.triggers.length; i++) {
        if (dialog.triggers[i] === false) {
            dialog.triggers[i] = true;
            break;
        }
    }
    let id = parseInt(e.target.id);
    user_selections.push(id);
    for (let i = 0; i < selectChildren.length; i++) {
        selectChildren[i].classList.remove('emerge');
        selectChildren[i].classList.remove('fade_reverse');
        selectChildren[i].classList.remove('display_block');
    }
    e.target.classList.add(`click_story_${id + 1}`);
    selectChildren[(id + 1) % 2].classList.add('fade_away');
}

function selectKeyboardHandler(e) {
    let key = e.key;
    if (key !== '1' && key !== '2') return;
    for (let i = 1; i < dialog.triggers.length; i++) {
        if (dialog.triggers[i] === false) {
            dialog.triggers[i] = true;
            break;
        }
    }
    lock_hover = 1;
    key = parseInt(key);
    user_selections.push(key - 1);
    for (let i = 0; i < selectChildren.length; i++) {
        selectChildren[i].classList.remove('emerge');
        selectChildren[i].classList.remove('fade_reverse');
        selectChildren[i].classList.remove('display_block');
    }
    lock_document = 1;
    selectChildren[(key + 1) % 2].classList.add(`click_story_${key}`);
    selectChildren[key % 2].classList.add('fade_away');
    let fn = addRemovableEventListener(selectChildren[(key + 1) % 2], 'animationend', () => {
        for (let i = 0; i < selectChildren.length; i++) {
            selectChildren[i].className = 'display_none';
        }
        fn();
    });
}

function changeBackGroundImage(url) {
    document.body.style.backgroundImage = `url(${url})`;
}

function backgroundTransition() {
    document.body.style.backgroundImage = 'url(./img/story/0.png)';
}

function parseScore() {
    switch (current_game) {
        case 'dyht':
            score = ((user_selections.length) / 3).toString();
            score = score.slice(0, 4);
            score = parseFloat(score) * 100;
            break;
        case 'lxh':
            score = ((user_selections.length) / 3).toString();
            score = score.slice(0, 4);
            score = parseFloat(score) * 100;
            break;
        case 'nz':
            score = ((user_selections.length) / 2).toString();
            score = score.slice(0, 4);
            score = parseFloat(score) * 100;
            break;
        case 'bs':
            score = ((user_selections.length) / 2).toString();
            score = score.slice(0, 4);
            score = parseFloat(score) * 100;
            break;
        case 'dsgl':
            score = (user_selections.length) * 100;
            break;
    }
    setCookie('score', score);
    window.location.href = 'end.html';
}

let dialog = new DialogSequence(drama[current_game], (el) => {
    let listenerArr = [];
    listenerArr.push(addRemovableEventListener(document, 'click', () => {
        listenerArr.forEach((fn) => {
            fn();
        });
        dialog.triggers[el] = true;
    }));
    listenerArr.push(addRemovableEventListener(document, 'keydown', (e) => {
        if (e.key === ' ' || e.key === 'ArrowDown' || e.key === 'Enter') {
            listenerArr.forEach((fn) => {
                fn();
            });
            dialog.triggers[el] = true;
        }
    }));
}, options[current_game]);
dialog.callback = parseScore;
let select = document.getElementById('select'),
    selectChildren = select.children,
    audio = document.getElementById('bgm'),
    triangle = document.getElementsByClassName('triangle')[0],
    storyboard = document.querySelector('#storyboard'),
    storyboard_title = document.querySelector('#storyboard .title'),
    introimg = document.getElementById('intro'),
    lock_hover = 0,
    lock_document = 1,
    user_selections = [],
    score;

for (let i = 0; i < selectChildren.length; i++) {
    selectChildren[i].onmouseenter = () => {
        if (lock_hover) return;
        selectChildren[(i + 1) % 2].classList.remove('fade_reverse');
        selectChildren[(i + 1) % 2].classList.add('fade');
        selectChildren[(i + 1) % 2].classList.add('shrink');
    };
    selectChildren[i].onmouseleave = () => {
        if (lock_hover) return;
        selectChildren[(i + 1) % 2].classList.remove('fade');
        selectChildren[(i + 1) % 2].classList.add('fade_reverse');
        selectChildren[(i + 1) % 2].classList.remove('shrink');
    };
    selectChildren[i].onclick = (e) => {
        lock_hover = 1;
        selectClickHandler(e);
        let fn = addRemovableEventListener(selectChildren[i], 'animationend', () => {
            for (let i = 0; i < selectChildren.length; i++) {
                selectChildren[i].className = 'display_none';
            }
            fn();
        });
    };
}

document.addEventListener('keydown', (e) => {
    if (lock_document) return;
    selectKeyboardHandler(e);
});

if (current_game === 'lxh' || current_game === 'bs') {
    for (let i = 0; i < selectChildren.length; i++) {
        selectChildren[i].style.backgroundColor = '#31B4B4';
    }
    triangle.classList.add('triangle_blue');
    storyboard.classList.add('blue');
    storyboard_title.classList.add('title_blue');
} else {
    for (let i = 0; i < selectChildren.length; i++) {
        selectChildren[i].style.backgroundColor = '#D13517';
    }
    triangle.classList.add('triangle_red');
    storyboard.classList.add('default');
    storyboard_title.classList.add('title_red');
}

audio.src = bgm[current_game];

introimg.addEventListener('click', () => {
    introimg.classList.remove('emerge');
    introimg.classList.add('disappear');
    dialog.activate();
    audio.play();
    setTimeout(()=> {
        document.body.removeChild(introimg);
    }, 250)
}, {
    once: true
});

changeBackGroundImage(background[current_game][0]);
